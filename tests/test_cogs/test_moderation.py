import pytest
from nextcord.ext import commands
from cogs.moderation import moderation
from unittest.mock import AsyncMock, MagicMock

@pytest.fixture
def bot():
    bot = commands.Bot(command_prefix="!")
    return bot

@pytest.fixture
def cog(bot):
    cog = moderation(bot)
    bot.add_cog(cog)
    return cog

def test_clean_command(cog, bot):
    assert cog.clean.name == "clean"
    assert cog.clean.description == "Solves many problems."

@pytest.mark.asyncio
async def test_clean_functionality(cog):
    interaction = AsyncMock()
    interaction.user = MagicMock()
    interaction.user.name = "TestUser"
    interaction.user.id = 123456789
    interaction.response.send_message = AsyncMock()
    interaction.target = MagicMock()
    interaction.target.add_reaction = AsyncMock()

    await cog.clean(interaction, message=interaction.target)

    interaction.response.send_message.assert_called_once_with("<a:bdk:920426208498421840>")
    assert interaction.target.add_reaction.call_count == 20
    reactions = ['ğŸ™…', 'ğŸ™†', 'ğŸ™‡', 'ğŸ™‹', 'ğŸ™Œ', 'ğŸ™', 'ğŸ™', 'ğŸ™', 'âœ‚', 'âœˆ', 'âœ‰', 'âœŠ', 'âœ‹', 'âœŒ', 'âœ', 'â„', 'â¤', 'ğŸš€', 'ğŸšƒ', 'ğŸš„', 'ğŸš…', 'ğŸš‡', 'ğŸš‰', 'ğŸšŒ', 'ğŸš', 'ğŸš‘', 'ğŸš’', 'ğŸš“', 'ğŸš•', 'ğŸš—', 'ğŸš™', 'ğŸšš', 'ğŸš¢', 'ğŸš¤', 'ğŸš¥', 'ğŸš§', 'ğŸš¨', 'ğŸš©', 'ğŸšª', 'ğŸš«', 'ğŸš¬', 'ğŸš²', 'ğŸš¶', 'ğŸš½', 'ğŸ›€', 'âŒš', 'âŒ›', 'â°', 'â³', 'â˜', 'â˜', 'â˜”', 'â˜•', 'â™¨', 'â™»', 'â™¿', 'âš“', 'âš¡', 'âš½', 'âš¾', 'â›„', 'â›…', 'â›ª', 'â›²', 'â›³', 'â›µ', 'â›º', 'â­', 'â›½', 'ğŸƒ', 'ğŸŒ€', 'ğŸŒ', 'ğŸŒ‚', 'ğŸŒƒ', 'ğŸŒ„', 'ğŸŒ…', 'ğŸŒ†', 'ğŸŒ‡', 'ğŸŒˆ', 'ğŸŒ‰', 'ğŸŒŠ', 'ğŸŒ‹', 'ğŸŒ', 'ğŸŒ™', 'ğŸŒ›', 'ğŸŒŸ', 'ğŸŒ ', 'ğŸŒ°', 'ğŸŒ±', 'ğŸŒ´', 'ğŸŒµ', 'ğŸŒ·', 'ğŸŒ¸', 'ğŸŒ¹', 'ğŸŒº', 'ğŸŒ»', 'ğŸŒ¼', 'ğŸŒ½', 'ğŸŒ¾', 'ğŸŒ¿', 'ğŸ€', 'ğŸ', 'ğŸ‚', 'ğŸƒ', 'ğŸ„', 'ğŸ…', 'ğŸ†', 'ğŸ‡', 'ğŸˆ', 'ğŸ‰', 'ğŸŠ', 'ğŸŒ', 'ğŸ', 'ğŸ', 'ğŸ', 'ğŸ‘', 'ğŸ’', 'ğŸ“', 'ğŸ”', 'ğŸ•', 'ğŸ–', 'ğŸ—', 'ğŸ˜', 'ğŸ™', 'ğŸš', 'ğŸ›', 'ğŸ', 'ğŸ', 'ğŸŸ', 'ğŸ ', 'ğŸ¡', 'ğŸ¢', 'ğŸ£', 'ğŸ¤', 'ğŸ¥', 'ğŸ¦', 'ğŸ§', 'ğŸ¨', 'ğŸ©', 'ğŸª', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ®', 'ğŸ¯', 'ğŸ°', 'ğŸ±', 'ğŸ²', 'ğŸ³', 'ğŸ´', 'ğŸµ', 'ğŸ¶', 'ğŸ·', 'ğŸ¸', 'ğŸ¹', 'ğŸº', 'ğŸ»', 'ğŸ€', 'ğŸ', 'ğŸ‚', 'ğŸƒ', 'ğŸ„', 'ğŸ…', 'ğŸ†', 'ğŸ‡', 'ğŸˆ', 'ğŸ‰', 'ğŸŠ', 'ğŸ‹', 'ğŸŒ', 'ğŸ', 'ğŸ', 'ğŸ', 'ğŸ', 'ğŸ‘', 'ğŸ’', 'ğŸ“', 'ğŸ ', 'ğŸ¡', 'ğŸ¢', 'ğŸ£', 'ğŸ¤', 'ğŸ¥', 'ğŸ¦', 'ğŸ§', 'ğŸ¨', 'ğŸ©', 'ğŸª', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ®', 'ğŸ¯', 'ğŸ°', 'ğŸ±', 'ğŸ²', 'ğŸ³', 'ğŸ´', 'ğŸµ', 'ğŸ¶', 'ğŸ·', 'ğŸ¸', 'ğŸ¹', 'ğŸº',  'ğŸ½', 'ğŸ¾', 'ğŸ¿', 'ğŸ€', 'ğŸ', 'ğŸ‚', 'ğŸƒ', 'ğŸ„', 'ğŸ†', 'ğŸˆ', 'ğŸŠ', 'ğŸ ', 'ğŸ¡', 'ğŸ¢', 'ğŸ£', 'ğŸ¥', 'ğŸ¦', 'ğŸ§', 'ğŸ¨', 'ğŸ©', 'ğŸª', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ®', 'ğŸ¯', 'ğŸ°', 'ğŸŒ', 'ğŸ', 'ğŸ', 'ğŸ‘', 'ğŸ’', 'ğŸ”', 'ğŸ—', 'ğŸ˜', 'ğŸ™', 'ğŸš', 'ğŸ›', 'ğŸœ', 'ğŸ', 'ğŸ', 'ğŸŸ', 'ğŸ ', 'ğŸ¡', 'ğŸ¢', 'ğŸ£', 'ğŸ¤', 'ğŸ¥', 'ğŸ¦', 'ğŸ§', 'ğŸ¨', 'ğŸ©', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ®', 'ğŸ¯', 'ğŸ°', 'ğŸ±', 'ğŸ²', 'ğŸ³', 'ğŸ´', 'ğŸµ', 'ğŸ¶', 'ğŸ·', 'ğŸ¸', 'ğŸ¹', 'ğŸº', 'ğŸ»', 'ğŸ¼', 'ğŸ½', 'ğŸ¾', 'ğŸ‘€', 'ğŸ‘‚', 'ğŸ‘ƒ', 'ğŸ‘„', 'ğŸ‘…', 'ğŸ‘†', 'ğŸ‘‡', 'ğŸ‘ˆ', 'ğŸ‘‰', 'ğŸ‘Š', 'ğŸ‘‹', 'ğŸ‘Œ', 'ğŸ‘', 'ğŸ‘', 'ğŸ‘', 'ğŸ‘', 'ğŸ‘‘', 'ğŸ‘’', 'ğŸ‘“', 'ğŸ‘”', 'ğŸ‘•', 'ğŸ‘–', 'ğŸ‘—', 'ğŸ‘˜', 'ğŸ‘™', 'ğŸ‘š', 'ğŸ‘›', 'ğŸ‘œ', 'ğŸ‘', 'ğŸ‘', 'ğŸ‘Ÿ', 'ğŸ‘ ', 'ğŸ‘¡', 'ğŸ‘¢', 'ğŸ‘£',  'ğŸ‘¦', 'ğŸ‘§', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘ª', 'ğŸ‘«', 'ğŸ‘®', 'ğŸ‘¯', 'ğŸ‘°', 'ğŸ‘±', 'ğŸ‘´', 'ğŸ‘¶', 'ğŸ‘·', 'ğŸ‘¸', 'ğŸ‘¹', 'ğŸ‘º', 'ğŸ‘»', 'ğŸ‘¼', 'ğŸ‘½', 'ğŸ‘¾', 'ğŸ‘¿', 'ğŸ’€', 'ğŸ’', 'ğŸ’‚', 'ğŸ’ƒ', 'ğŸ’„', 'ğŸ’…', 'ğŸ’†', 'ğŸ’‡', 'ğŸ’ˆ', 'ğŸ’‰', 'ğŸ’Š', 'ğŸ’‹', 'ğŸ’Œ', 'ğŸ’', 'ğŸ’', 'ğŸ’', 'ğŸ’', 'ğŸ’‘', 'ğŸ’’', 'ğŸ’“', 'ğŸ’”', 'ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’˜', 'ğŸ’™', 'ğŸ’š', 'ğŸ’›', 'ğŸ’œ', 'ğŸ’', 'ğŸ’', 'ğŸ’Ÿ', 'ğŸ’ ', 'ğŸ’¡', 'ğŸ’¢', 'ğŸ’£', 'ğŸ’¤', 'ğŸ’¥', 'ğŸ’¦', 'ğŸ’§', 'ğŸ’¨', 'ğŸ’©', 'ğŸ’ª', 'ğŸ’«', 'ğŸ’¬', 'ğŸ’®', 'ğŸ’¯', 'ğŸ’°', 'ğŸ’²', 'ğŸ’³', 'ğŸ’µ', 'ğŸ’¸', 'ğŸ’º', 'ğŸ’»', 'ğŸ’¼', 'ğŸ’½', 'ğŸ’¾',  'ğŸ“€', 'ğŸ“ƒ', 'ğŸ“…', 'ğŸ“†', 'ğŸ“ˆ', 'ğŸ“‰', 'ğŸ“Œ', 'ğŸ“', 'ğŸ“', 'ğŸ““', 'ğŸ“”', 'ğŸ“•', 'ğŸ“–', 'ğŸ“', 'ğŸ“Ÿ', 'ğŸ“ ', 'ğŸ“¡', 'ğŸ“£', 'ğŸ“¦', 'ğŸ“§', 'ğŸ“«', 'ğŸ“°', 'ğŸ“±', 'ğŸ“·', 'ğŸ“¹', 'ğŸ“º', 'ğŸ“»', 'ğŸ“¼', 'ğŸ”Š', 'ğŸ”‹', 'ğŸ”Œ', 'ğŸ”', 'ğŸ”', 'ğŸ”‘', 'ğŸ”’', 'ğŸ”“', 'ğŸ””', 'ğŸ”œ', 'ğŸ”¥', 'ğŸ”¦', 'ğŸ”§', 'ğŸ”¨', 'ğŸ”©', 'ğŸ”ª', 'ğŸ”«', 'ğŸ”®', 'ğŸ—»', 'ğŸ—¼', 'ğŸ—½', 'ğŸ—¾', 'ğŸ—¿', 'ğŸ˜´', 'ğŸš', 'ğŸš‚', 'ğŸš†', 'ğŸšˆ', 'ğŸšŠ', 'ğŸš', 'ğŸš', 'ğŸš', 'ğŸš”', 'ğŸš–', 'ğŸš˜', 'ğŸš›', 'ğŸšœ', 'ğŸš', 'ğŸš', 'ğŸšŸ', 'ğŸš ', 'ğŸš¡', 'ğŸš£', 'ğŸš¦', 'ğŸš®', 'ğŸšµ', 'ğŸš¿', 'ğŸ›', 'ğŸŒ', 'ğŸŒ', 'ğŸŒœ', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ²', 'ğŸŒ³', 'ğŸ‹', 'ğŸ', 'ğŸ¼', 'ğŸ‡', 'ğŸ‰', 'ğŸ¤', 'ğŸ€', 'ğŸ', 'ğŸ‚', 'ğŸƒ', 'ğŸ„', 'ğŸ…', 'ğŸ†', 'ğŸ‡', 'ğŸˆ', 'ğŸ‰', 'ğŸŠ', 'ğŸ‹', 'ğŸ', 'ğŸ', 'ğŸ“', 'ğŸ•', 'ğŸ–', 'ğŸª', 'ğŸ‘­', 'ğŸ“¬', 'ğŸ“­', 'ğŸ“¯', 'ğŸ”¬', 'ğŸ”­']
    for i in range(20):
        assert interaction.target.add_reaction.call_args_list[i][0][0] in reactions
